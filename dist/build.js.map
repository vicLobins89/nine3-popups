{"version":3,"sources":["main.js"],"names":["popups","document","querySelectorAll","triggerCookieDrop","closePopup","popup","popupId","getAttribute","xhttp","XMLHttpRequest","onreadystatechange","readyState","response","JSON","parse","console","log","open","nine3popup","ajax_url","nonce","send","replace","parentNode","removeChild","forEach","timeDelay","dataset","delay","mainClass","classList","allClasses","value","style","display","className","setTimeout","querySelector","addEventListener","e","target","currentTarget","popupWrapper","popupContent","clientHeight","alignSelf"],"mappings":";CAAA,WACQA,IAAAA,EAASC,SAASC,iBAAiB,gBAErC,GAACF,EAAO,GAAR,CAQEG,IAiBAC,EAAa,SAAAC,GACbC,IAAAA,EAAUD,EAAME,aAAa,OAlBT,SAAAD,GAClBE,IAAAA,EAAQ,IAAIC,eAClBD,EAAME,mBAAqB,WACrB,GAAmB,GAAnB,KAAKC,WAAiB,CAClBC,IAAAA,EAAWC,KAAKC,MAAMN,EAAMI,UAClCG,QAAQC,IAAIJ,KAIhBJ,EAAMS,KAAK,MAAUC,GAAAA,OAAAA,WAAWC,SAAqCD,8BAAAA,OAAAA,WAAWE,MAAkBd,cAAAA,OAAAA,IAClGE,EAAMa,QAUNlB,CADAG,EAAUA,EAAQgB,QAAQ,YAAa,KAEvCjB,EAAMkB,WAAWC,YAAYnB,IAG/BL,EAAOyB,QAAQ,SAAApB,GAEPqB,IAAAA,EAAYrB,EAAMsB,QAAQC,MAC5BF,GAAAA,EAAW,CACPG,IAAAA,EAAYxB,EAAMyB,UAAU,GAC5BC,EAAa1B,EAAMyB,UAAUE,MAGnC3B,EAAM4B,MAAMC,QAAU,OACtB7B,EAAM8B,UAAYN,EAGlBO,WAAW,WACT/B,EAAM4B,MAAMC,QAAU,QACtB7B,EAAM8B,UAAYJ,GACL,IAAZL,GAISrB,EAAMgC,cAAc,uBAC5BC,iBAAiB,QAAS,WAC9BlC,EAAWC,KAGbA,EAAMiC,iBAAiB,QAAS,SAACC,GAC3BA,EAAEC,SAAWD,EAAEE,eAGnBrC,EAAWC,KAGPqC,IAAAA,EAAerC,EAAMgC,cAAc,yBACnCM,EAAetC,EAAMgC,cAAc,yBACnBK,EAAaE,aACbD,EAAaC,eAEjCD,EAAaV,MAAMY,UAAY,YAvErC","file":"build.js","sourceRoot":"../js","sourcesContent":["(() => {\n  const popups = document.querySelectorAll('.nine3-popup');\n\n  if (!popups[0]) {\n    return;\n  }\n\n  /**\n   * Triggers XMLHttpReq and leaves a cookie via a php script\n   * @param {int} popupId \n   */\n  const triggerCookieDrop = popupId => {\n    const xhttp = new XMLHttpRequest();\n    xhttp.onreadystatechange = function () {\n      if (this.readyState == 4) {\n        const response = JSON.parse(xhttp.response);\n        console.log(response);\n      }\n    };\n\n    xhttp.open('GET', `${nine3popup.ajax_url}?action=nine3-popup&nonce=${nine3popup.nonce}&popup_id=${popupId}`);\n    xhttp.send();\n  };\n\n  /**\n   * Click event callback, closes popup, triggers cookie drop.\n   * @param {HTMLElement} popup \n   */\n  const closePopup = popup => {\n    let popupId = popup.getAttribute('id');\n    popupId = popupId.replace('popup-id-', '');\n    triggerCookieDrop(popupId);\n    popup.parentNode.removeChild(popup);\n  };\n\n  popups.forEach(popup => {\n    // Delay the popup if has data attr.\n    const timeDelay = popup.dataset.delay;\n    if (timeDelay) {\n      const mainClass = popup.classList[0];\n      const allClasses = popup.classList.value;\n\n      // Remove all but the main class to prevent css animations and hide.\n      popup.style.display = 'none';\n      popup.className = mainClass;\n\n      // Re-add classes and show popup after delay.\n      setTimeout(() => {\n        popup.style.display = 'block';\n        popup.className = allClasses;\n      }, timeDelay * 1000);\n    }\n\n    // Close button click event.\n    const close = popup.querySelector('.nine3-popup__close');\n    close.addEventListener('click', () => {\n      closePopup(popup);\n    });\n\n    popup.addEventListener('click', (e) => {\n      if (e.target !== e.currentTarget) {\n        return;\n      }\n      closePopup(popup);\n    });\n\n    const popupWrapper = popup.querySelector('.nine3-popup__wrapper');\n    const popupContent = popup.querySelector('.nine3-popup__content');\n    const wrapperHeight = popupWrapper.clientHeight;\n    const contentHeight = popupContent.clientHeight;\n    if (wrapperHeight < contentHeight) {\n      popupContent.style.alignSelf = 'unset';\n    }\n  });\n})();"]}